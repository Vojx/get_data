<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>利用angular完成跨域请求的新语法</title>
    <style>
        h1{
            color: red;
        }
    </style>
    <script src="node_modules/angular/angular.js"></script>
</head>
<body ng-app="myApp" ng-controller="jsonpController">
    <h1>{{result}}</h1>
    <button ng-click="fn()">获取数据</button>
</body>
</html>
<script>
(function(angular){
  var app = angular.module('myApp',[]);
  app.controller('jsonpController',['$scope','$http',function($scope,$http){
    $scope.fn = function(){
        //$http(req).then(function(){...}, function(){...});
        $http({
            url:'http://apis.juhe.cn/oil/region?city=%E5%8C%97%E4%BA%AC%E5%B8%82&format=2&key=2b0c44707ed7ac314ae88f62bedc8e0b',
            method:'get',

        }).then(function(data){
            console.log(data);
            var reason=data.data.reason;
            $scope.result=reason;
        },function(res){
            console.log(res);
            console.log('出错了');
        });
    };
  }]);
})(angular);
</script>